

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; The OKD Orchestrator 1.5.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Deployment Configurations (v1)" href="deployment-configurations.html" />
    <link rel="prev" title="Architecture" href="architecture.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> The OKD Orchestrator
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="orientation.html">Orientation</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#essential-parts">Essential parts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#git">Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="#docker">Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="deployment-configurations.html">Deployment Configurations (v1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced/building-the-docker-image.html">Building the Docker Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced/running-without-docker.html">Running Without Docker</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started-with-aws">Getting Started with AWS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#provider-environment-variables">Provider Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#account-preparation">Account Preparation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#account">Account</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-access-keys">API Access Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ssh-key-pair">SSH Key Pair</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started-with-gce">Getting Started with GCE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Provider Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Account Preparation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Account</a></li>
<li class="toctree-l4"><a class="reference internal" href="#credentials-file">Credentials File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">SSH Key Pair</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#considerations">Considerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-your-cluster">Building your Cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#project-and-credentials">Project and Credentials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#public-ip-addresses">Public IP Addresses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compiling-machine-images.html">Compiling Machine Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="anatomy-of-a-deployment-configuration.html">Anatomy of a Deployment Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="generating-site-certificates.html">Generating SSL Certificates</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-your-cluster.html">Creating a Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="destroying-your-cluster.html">Destroying a Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/advanced-topics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The OKD Orchestrator</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/getting-started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="essential-parts">
<h2>Essential parts<a class="headerlink" href="#essential-parts" title="Permalink to this headline">¶</a></h2>
<p>The orchestrator is designed to simplify the construction of an OpenShift
cluster on various cloud providers using <strong>deployments</strong> - high-level
configuration files written in <a class="reference external" href="https://yaml.org">YAML</a>. The deployment configurations are
described in the <a class="reference internal" href="deployment-configurations.html"><span class="doc">Deployment Configurations (v1)</span></a> section of the documentation.</p>
<p>At the moment we have working solutions for Amazon <em>EC2</em>, <em>OpenStack</em> and
<em>GCE</em> and a working example for <em>EC2</em> that we use as a tutorial.</p>
<blockquote>
<div><p>If this is your first time using the OKD Orchestrator make sure you’ve
visited the <a class="reference internal" href="orientation.html"><span class="doc">Orientation</span></a> document, it guides you through the
concepts of the orchestrator with a worked example on AWS.</p>
</div></blockquote>
<p>The tools required by the orchestrator are packaged into a convenient
Docker image that you can run on your laptop or desktop. The essential
tools you <em>will</em> need are: -</p>
<ul class="simple">
<li><p><strong>Git</strong> (and a fork of the OKD Orchestrator repository)</p></li>
<li><p><strong>Docker</strong></p></li>
</ul>
<div class="section" id="git">
<h3>Git<a class="headerlink" href="#git" title="Permalink to this headline">¶</a></h3>
<p>In order to use the orchestrator, an open source software project, you will
need the <a class="reference external" href="https://git-scm.com">Git</a> version control system installed. Using Git you should start
with a clone of a <strong>fork</strong> of the orchestrator project. A fork is preferred
because you may need to make changes to the configuration files or
create your own configurations.</p>
<ol class="arabic simple">
<li><p>Install Git</p></li>
<li><p>Visit the <a class="reference external" href="https://github.com/InformaticsMatters/okd-orchestrator">orchestrator repository</a>. Fork it and clone it to your
development host.</p></li>
</ol>
<p>You will be working from the clone of this project so start by navigating to
the root of your working copy.</p>
</div>
<div class="section" id="docker">
<h3>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h3>
<p>We use <a class="reference external" href="https://www.docker.com">Docker</a> because it is a tool designed to make it easier to create,
deploy, and run applications by using containers. Containers allow a developer
to package up an application with all of the parts it needs, such as libraries
and other dependencies, and ship it all out as one package.</p>
<ol class="arabic simple">
<li><p>Install Docker. You can refer to Docker’s installation guide,
which includes guides for various platforms.</p></li>
</ol>
<p>We have been using Docker <strong>18.09.0</strong> but any recent version should be
suitable.</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">See:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deployment-configurations.html">Deployment Configurations (v1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/building-the-docker-image.html">Building the Docker Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/running-without-docker.html">Running Without Docker</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="getting-started-with-aws">
<h2>Getting Started with AWS<a class="headerlink" href="#getting-started-with-aws" title="Permalink to this headline">¶</a></h2>
<div class="section" id="provider-environment-variables">
<h3>Provider Environment Variables<a class="headerlink" href="#provider-environment-variables" title="Permalink to this headline">¶</a></h3>
<p>A number of parameters are required by the orchestrator. These are
defined in a cloud-provider-specific <em>template</em> file in the <code class="docutils literal notranslate"><span class="pre">provider-env</span></code>
directory.</p>
<p>Copy <code class="docutils literal notranslate"><span class="pre">setenv-aws-template.sh</span></code> as <code class="docutils literal notranslate"><span class="pre">setenv.sh</span></code>. You’ll be using this file
throughout this example.</p>
</div>
<div class="section" id="account-preparation">
<h3>Account Preparation<a class="headerlink" href="#account-preparation" title="Permalink to this headline">¶</a></h3>
<p>You use different types of security credentials depending on how you
interact with AWS and, in order to use the orchestrator, you will need: -</p>
<ul class="simple">
<li><p>An <strong>AWS account</strong> that allows you to sign in to the AWS Management Console</p></li>
<li><p><strong>API Access keys</strong> that allow the orchestrator to make programmatic calls to
the AWS API on your behalf</p></li>
<li><p>An <strong>SSH Key Pair</strong> that you and the OKD Orchestrator can use to create
and access EC2 objects.</p></li>
</ul>
<div class="section" id="account">
<h4>Account<a class="headerlink" href="#account" title="Permalink to this headline">¶</a></h4>
<p>If you do not have an <strong>AWS Account</strong> visit <a class="reference external" href="https://aws.amazon.com">https://aws.amazon.com</a> where you can
sign-up.</p>
</div>
<div class="section" id="api-access-keys">
<h4>API Access Keys<a class="headerlink" href="#api-access-keys" title="Permalink to this headline">¶</a></h4>
<p><strong>Access Keys</strong> and are described on the Amazon <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">Access Keys</a>
page. You will need environment AWS-compliant environment variables defined:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AWS_ACCESS_KEY</span>
<span class="n">AWS_SECRET_KEY</span>
</pre></div>
</div>
</div>
<div class="section" id="ssh-key-pair">
<h4>SSH Key Pair<a class="headerlink" href="#ssh-key-pair" title="Permalink to this headline">¶</a></h4>
<p>You can generate a key-pair that does not use a pass phrase for this example
using the <code class="docutils literal notranslate"><span class="pre">ssh-keygen</span></code> tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ssh-keygen -f okdo-keypair -t rsa -b 2048 -N &#39;&#39; -C okdo-keypair
</pre></div>
</div>
<p>The keypair should be present in the root of the orchestrator project,
not in your <code class="docutils literal notranslate"><span class="pre">.ssh</span></code> directory.</p>
<p>You should then upload the public (<code class="docutils literal notranslate"><span class="pre">.pub</span></code>) part to your AWS account.
You will need to upload the key-pair to each <a class="reference external" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html">region</a> that you intend to use.
Our example assumes you’ll be deploying to <strong>Frankfurt</strong>.</p>
<p>Place the name of the keypair in your <code class="docutils literal notranslate"><span class="pre">setenv.sh</span></code>. The value
should replace the existing value for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TF_VAR_keypair_name</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="getting-started-with-gce">
<h2>Getting Started with GCE<a class="headerlink" href="#getting-started-with-gce" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Provider Environment Variables<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>A number of parameters are required by the orchestrator. These are
defined in a cloud-provider-specific <em>template</em> file in the <code class="docutils literal notranslate"><span class="pre">provider-env</span></code>
directory.</p>
<p>Copy <code class="docutils literal notranslate"><span class="pre">setenv-gce-template.sh</span></code> as <code class="docutils literal notranslate"><span class="pre">setenv.sh</span></code>. You’ll be using this file
throughout this example.</p>
</div>
<div class="section" id="id4">
<h3>Account Preparation<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>You should have a project in your GCE account that you want to use for the
OKD installation. You will need to download the credentials as a JSON file,
this is described in the
<a class="reference external" href="https://www.packer.io/docs/builders/googlecompute.html">Packer documentation</a></p>
<p>You use different types of security credentials depending on how you
interact with GCE and, in order to use the orchestrator, you will need: -</p>
<ul class="simple">
<li><p>A <strong>GCE account</strong> for the Compute Engine</p></li>
<li><p>A project-based <strong>credentials file</strong>, a JSON file provided by Google that
allows the orchestrator to make programmatic calls to the GCE API
on your behalf</p></li>
<li><p>An <strong>SSH Key Pair</strong> that you and the OKD Orchestrator can use to create
and access GCE objects.</p></li>
</ul>
<div class="section" id="id5">
<h4>Account<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>If you do not have an <strong>GCE Account</strong> visit <a class="reference external" href="https://cloud.google.com">https://cloud.google.com</a> where
you can sign-up.</p>
</div>
<div class="section" id="credentials-file">
<h4>Credentials File<a class="headerlink" href="#credentials-file" title="Permalink to this headline">¶</a></h4>
<p>You should place your credentials file in the root of the OKD Orchestrator
project clone. Name your credentials file <code class="docutils literal notranslate"><span class="pre">gce-credentials.json</span></code> and save
it in the root directory of the OKC Orchestrator clone (or fork). This file
will be used to create machine images with <strong>Yacker</strong> and instantiate the
cluster using <strong>Terraform</strong>.</p>
</div>
<div class="section" id="id6">
<h4>SSH Key Pair<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>You can generate a key-pair that does not use a pass phrase for this example
using the <code class="docutils literal notranslate"><span class="pre">ssh-keygen</span></code> tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ssh-keygen -f okdo-keypair -t rsa -b 2048 -N &#39;&#39; -C centos
</pre></div>
</div>
<p>The keypairs (a private <code class="docutils literal notranslate"><span class="pre">okdo-keypair</span></code> and public <code class="docutils literal notranslate"><span class="pre">okdo-keypair.pub</span></code> file)
should be present in the root of the orchestrator project, not in your
<code class="docutils literal notranslate"><span class="pre">.ssh</span></code> directory.</p>
<p>You should then upload the public (<code class="docutils literal notranslate"><span class="pre">.pub</span></code>) part to your GCE account
under <code class="docutils literal notranslate"><span class="pre">Compute</span> <span class="pre">Engine</span> <span class="pre">-&gt;</span> <span class="pre">Metadata</span> <span class="pre">-&gt;</span> <span class="pre">SSH</span> <span class="pre">Keys</span></code> for the given project.</p>
<p>Place the name of the keypair in your <code class="docutils literal notranslate"><span class="pre">setenv.sh</span></code>. The value
should replace the existing value for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TF_VAR_keypair_name</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="considerations">
<h3>Considerations<a class="headerlink" href="#considerations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Unlike the AWS deployment the GCE deployment does not use an internal
subnet for OKD nodes. Consequently all physical nodes have a
public-fading IP address.</p></li>
<li><p>All instances are created in zone <strong>a</strong>.</p></li>
</ul>
</div>
</div>
<div class="section" id="building-your-cluster">
<h2>Building your Cluster<a class="headerlink" href="#building-your-cluster" title="Permalink to this headline">¶</a></h2>
<p>To build your cluster you will need to compile the base images for AWS
before create your cluster.</p>
<ul class="simple">
<li><p>When you’re ready, follow the instructions for AWS in the
<a class="reference internal" href="compiling-machine-images.html"><span class="doc">Compiling Machine Images</span></a> guide</p></li>
<li><p>With base images compiled, you’re ready to create the OKD cluster,
all of which is covered in the <a class="reference internal" href="creating-your-cluster.html"><span class="doc">Creating a Cluster</span></a> guide</p></li>
</ul>
<div class="section" id="project-and-credentials">
<h3>Project and Credentials<a class="headerlink" href="#project-and-credentials" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="public-ip-addresses">
<h2>Public IP Addresses<a class="headerlink" href="#public-ip-addresses" title="Permalink to this headline">¶</a></h2>
<p>In all providers you will need static/fixed IP addresses that your domain
can map to to provide access to the <em>console API</em> and <em>applications</em>.</p>
<p>You will therefore need one or two pre-allocated <strong>External IP addresses</strong>
in your desired region depending on whether you’re deploying a compact
(combined master/infra node) or standard (separate master and infra nodes).</p>
<p>The allocated IP address values become values for the following configuration
items in your deployment. In GCE this is simply the allocated IP addresses,
in AWS it’s the floating IP identity. Here’s the configuration setting
for an example GCE setup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span><span class="p">:</span>
  <span class="n">master</span><span class="p">:</span>
    <span class="n">fixed_ip_id</span><span class="p">:</span> <span class="mf">35.198</span><span class="o">.</span><span class="mf">72.215</span>
  <span class="n">infra</span><span class="p">:</span>
    <span class="n">fixed_ip_id</span><span class="p">:</span> <span class="mf">35.198</span><span class="o">.</span><span class="mf">131.227</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="deployment-configurations.html" class="btn btn-neutral float-right" title="Deployment Configurations (v1)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="architecture.html" class="btn btn-neutral float-left" title="Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, OpenRiskNet

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>