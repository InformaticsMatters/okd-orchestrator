

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploying to Your Own Cluster &mdash; The OKD Orchestrator 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Environment Variables" href="environment-variables.html" />
    <link rel="prev" title="Destroying a Cluster" href="destroying-your-cluster.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> The OKD Orchestrator
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started-aws.html">Getting Started with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiling-machine-images.html">Compiling Machine Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiling-machine-images-for-aws.html">Compiling Machine Images for AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="generating-site-certificates.html">Generating SSL Certificates</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-your-cluster.html">Creating a Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="destroying-your-cluster.html">Destroying a Cluster</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deploying to Your Own Cluster</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#populating-my-machines">Populating my_machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying-okd">Deploying OKD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="environment-variables.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/advanced-topics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The OKD Orchestrator</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Deploying to Your Own Cluster</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/deploying-to-your-own-cluster.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploying-to-your-own-cluster">
<h1>Deploying to Your Own Cluster<a class="headerlink" href="#deploying-to-your-own-cluster" title="Permalink to this headline">¶</a></h1>
<p>So you have your own hardware, it’s all setup and you want to take
advantage of the OKD orchestrator to simplify the installation of
the OKD container platform. Here you just need to provide the
details of your cluster in a short <a class="reference external" href="https://yaml.org">YAML</a> section of the deployment file.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Familiarise yourself with basic, automated installations but reading
Before you can use the orchestrator on your own cluster the cluster instances
must satisfy the <strong>system and environment requirements</strong> defined in the
official OKD documentation. For v3.11 this can be found <a class="reference external" href="https://docs.okd.io/3.11/install/prerequisites.html">here</a>.</p>
<p>Additionally, in case it’s not obvious…</p>
<ul class="simple">
<li>Your cluster must have access to the <em>outside world</em> so that additional
packages can be downloaded</li>
<li>You must be able to SSH to the designated Bastion from your development
machine (i.e. where you have a copy of the orchestrator) using the keypair
available to the Orchestrator (i.e. the keypair you</li>
<li>You need to have installed <code class="docutils literal notranslate"><span class="pre">git</span></code> so that this repository can be
cloned to the designated <em>control machine</em> in your cluster.</li>
</ul>
</div>
<div class="section" id="populating-my-machines">
<h2>Populating my_machines<a class="headerlink" href="#populating-my-machines" title="Permalink to this headline">¶</a></h2>
<p>In order to deploy OKD to you cluster the orchestrator has to know about
the machines that will be involved. This is achieved by adding a
<code class="docutils literal notranslate"><span class="pre">my_machines</span></code> section to your deployment configuration.</p>
<p>The values you provide are used to populate the rendered OKD inventory file,
which would be part of the automatic step that would be managed by <a class="reference external" href="https://www.terraform.io">Terraform</a>
when using the Orchestrator to create the cluster. As <em>you</em> have created the
machines then you provide the values that Terraform would have provided.</p>
<p>Instructions for populating the configuration can be found in the reference
configuration file (<code class="docutils literal notranslate"><span class="pre">deployments/compact-aws-frankfurt-3-11</span></code>). Just look for
the annotated <code class="docutils literal notranslate"><span class="pre">my_machines</span></code> section in the configuration file.</p>
</div>
<div class="section" id="deploying-okd">
<h2>Deploying OKD<a class="headerlink" href="#deploying-okd" title="Permalink to this headline">¶</a></h2>
<p>With a <code class="docutils literal notranslate"><span class="pre">my_machines</span></code> section populated, the cluster setup is like any
other…</p>
<ul class="simple">
<li>Craft a suitable <code class="docutils literal notranslate"><span class="pre">setenv.sh</span></code></li>
<li>Start and enter the OKD container with <code class="docutils literal notranslate"><span class="pre">./okdo-start.sh</span></code></li>
<li>Run <code class="docutils literal notranslate"><span class="pre">./create.py</span> <span class="pre">--cluster</span></code>. You will need to add the name of the
relevant deployment if the orchestrator has more than one.</li>
<li>When this is complete, hop onto the <em>Bastion</em>, move to the
<code class="docutils literal notranslate"><span class="pre">okd-orchestrator</span></code> directory that will have been created and run
<code class="docutils literal notranslate"><span class="pre">./create.py</span> <span class="pre">--okd</span></code></li>
</ul>
<blockquote class="epigraph">
<div>If you have your own bastion you might want to use the OKD Orchestrator in
<em>just plan</em> mode so that you can render the OKD inventory file
based on your <code class="docutils literal notranslate"><span class="pre">my_machines</span></code> definition without resorting to configuring
the Bastion. If so you will need to copy the generated <code class="docutils literal notranslate"><span class="pre">inventory.yaml</span></code>
file to the Bastion for subsequent manual deployment of the OK platform.
You can run <em>just plan</em> by adding <code class="docutils literal notranslate"><span class="pre">--just-plan</span></code> to <code class="docutils literal notranslate"><span class="pre">create.py</span></code>.</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="environment-variables.html" class="btn btn-neutral float-right" title="Environment Variables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="destroying-your-cluster.html" class="btn btn-neutral" title="Destroying a Cluster" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Informatics Matters

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>