---

name: Simple AWS Deployment (OpenShift 3.9) [Frankfurt]

openshift:

  # The version tag for OpenShift Origin/OKD ansible playbooks.
  ansible_tag: openshift-ansible-3.9.54-1
  play:
  - prerequisites.yml
  - deploy_cluster.yml

  # The directory of the inventory for this deployment.
  # This directory is expected to exist in `openshift/inventories'.
  # The inventory directory contains template files for the Bastion
  # and OpenShift cluster. These can be shared between deployments.
  inventory_dir: simple-aws-3-9

terraform:

  # The Terraform templates
  # used to build the Bastion and its Cluster.
  dir: aws

ansible:

  # The Ansible version required to deploy the cluster.
  version: 2.6.7

bastion:

  type: t2.small

cluster:

  # A unique name for your cluster.
  # All your clusters must have a different ID.
  id: simple-frankfurt-39
  # Name prefix and suffix values for the names of each cluster instance.
  # Use this to quickly distinguish between instances.
  name_prefix: orn
  name_suffix:
  # The region and zone used for cluster instances.
  # At the moment all instances are created in the same zone.
  region: eu-central-1
  zone: eu-central-1a
  # The external IP address or domain-name of the Master node.
  # If not set the master public DNS will be used.
  # Whatever is used must provide a resolvable route to the master.
  # So, if you have a domain, ensure it's routed to the pre-allocated
  # public IP of the master (see cluster.master.fixed_ip_id).
  public_hostname: s-master.matildapeak.io
  # The external IP address or domain-name of the Infrastructure node.
  # (see cluster.public_hostname)
  router_basename: s-infra.matildapeak.io

  # Details of the Master nodes.
  #
  # At the moment only one master instance is supported.
  master:
    count: 1
    type: t2.xlarge
    # If you have pre-allocated public IPs for the Master set the value here.
    # This is _not_ normally the IP address itself, it is the cloud-provider's
    # IP identity. In AWS this would be the Elastic IP Allocation ID of
    # the form "eipalloc-0000000000000000".
    #
    # If you have not provided a pre-allocated (fixed) IP
    # leave this property empty.
    fixed_ip_id: eipalloc-010cfe12a8b8c7fa2
    # Set to automatically generate a Let's Encrypt/certbot certificate
    # for the master node when the cluster has been created but prior to
    # OpenShift installation.
    generate_cert: yes

  # Details of the Infrastructure nodes.
  #
  # At the moment only one master instance is supported.
  infra:
    count: 1
    type: t2.xlarge
    # The (optional) pre-allocated public IP for the Infrastructure.
    # (See cluster.master.fixed_ip)
    fixed_ip_id: eipalloc-037f7a1943abe1174

  # Details of the cluster compute nodes.
  node:
    count: 1
    type: t2.medium
